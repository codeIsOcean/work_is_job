# –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é CI/CD

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å `/opt/telegram-bot` ‚Üí `/opt/jobs_inDubai_prod` –≤ `deploy.yml`
2. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ –≤ `deploy-prod.yml`
3. –û–±–Ω–æ–≤–ª–µ–Ω `docker-compose.prod.yml` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ –∏–∑ registry

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

### 1. –ü—Ä–æ–≤–µ—Ä—å GitHub Secrets

–û—Ç–∫—Ä–æ–π: https://github.com/codeIsOcean/work_is_job/settings/secrets/actions

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:**

#### –î–ª—è —Ç–µ—Å—Ç–∞ (`test` –≤–µ—Ç–∫–∞):
- ‚úÖ `TEST_SERVER_HOST` = `88.210.35.183`
- ‚úÖ `TEST_SERVER_USER` = `root`
- ‚úÖ `TEST_SERVER_SSH_KEY` = (SSH –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á)

#### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (`main` –≤–µ—Ç–∫–∞):
- ‚úÖ `PROD_SERVER_HOST` = (IP –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞)
- ‚úÖ `PROD_SERVER_USER` = (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞)
- ‚úÖ `PROD_SERVER_SSH_KEY` = (SSH –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á)

### 2. –ï—Å–ª–∏ secrets –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç:

**–ü–æ–ª—É—á–∏ SSH –∫–ª—é—á —Å —Å–µ—Ä–≤–µ—Ä–∞:**

```powershell
ssh root@88.210.35.183 "cat ~/.ssh/github_actions_deploy"
```

–°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –≤—ã–≤–æ–¥ (–æ—Ç `-----BEGIN` –¥–æ `-----END`) –∏ –¥–æ–±–∞–≤—å –≤ GitHub Secret `TEST_SERVER_SSH_KEY`.

### 3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É:

```powershell
git checkout test
git add .
git commit -m "Test CI/CD"
git push origin test
```

–ü—Ä–æ–≤–µ—Ä—å: https://github.com/codeIsOcean/work_is_job/actions

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –¥–µ–ø–ª–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ –≤–º–µ—Å—Ç–æ –æ–±—Ä–∞–∑–∞ –∏–∑ registry

–í—Å–µ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å CI/CD –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

