# ============================================================
# COMMON - FSM STATES –ò –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
# ============================================================
# –≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
# - –í—Å–µ FSM StatesGroup –¥–ª—è Content Filter –Ω–∞—Å—Ç—Ä–æ–µ–∫
# - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ (parse_duration, parse_delay_seconds)
# - –û–±—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (WORDS_PER_PAGE, PATTERNS_PER_PAGE –∏ –¥—Ä.)
#
# –í—ã–Ω–µ—Å–µ–Ω–æ –∏–∑ settings_handler.py –¥–ª—è —Å–æ–±–ª—é–¥–µ–Ω–∏—è SRP (–ü—Ä–∞–≤–∏–ª–æ 30)
# ============================================================

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º FSM –∫–ª–∞—Å—Å—ã
from aiogram.fsm.state import State, StatesGroup
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º re –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
import re


# ============================================================
# –ö–û–ù–°–¢–ê–ù–¢–´
# ============================================================

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ —Å–ø–∏—Å–∫–µ
WORDS_PER_PAGE = 10

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
PATTERNS_PER_PAGE = 5

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–ª—è —Å–µ–∫—Ü–∏–π
SECTION_PATTERNS_PER_PAGE = 5

# –ù–∞–∑–≤–∞–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–¥–ª—è scam/base_signals.py)
BASE_SIGNAL_NAMES = {
    'money_amount': 'üí∞ –°—É–º–º—ã –¥–µ–Ω–µ–≥',
    'income_period': 'üìÖ –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å –¥–æ—Ö–æ–¥–∞',
    'easy_money': 'üí∏ –õ—ë–≥–∫–∏–µ –¥–µ–Ω—å–≥–∏',
    'call_to_action': 'üì≤ –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é',
    'crypto': '‚Çø –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞',
    'recruitment': 'üë• –ù–∞–±–æ—Ä –≤ –∫–æ–º–∞–Ω–¥—É',
    'remote_work': 'üè† –£–¥–∞–ª—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞',
    'exclamations': '‚ùó –ú–Ω–æ–≥–æ –≤–æ—Å–∫–ª–∏—Ü–∞–Ω–∏–π',
    'urgency': '‚è∞ –°—Ä–æ—á–Ω–æ—Å—Ç—å',
    'scheme': 'üìä –°—Ö–µ–º–∞/–ø—Ä–æ–µ–∫—Ç',
    'training': 'üìö –û–±—É—á–µ–Ω–∏–µ',
    'investments': 'üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏',
    'gambling': 'üé∞ –ö–∞–∑–∏–Ω–æ/—Å—Ç–∞–≤–∫–∏',
    'age_restriction': 'üîû –í–æ–∑—Ä–∞—Å—Ç 18+',
    'unique_offer': '‚≠ê –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ'
}


# ============================================================
# FSM –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –î–û–ë–ê–í–õ–ï–ù–ò–Ø –°–õ–û–í
# ============================================================

class AddWordStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞."""
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Å–ª–æ–≤–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    waiting_for_word = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—Å–ª–µ preview –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
    waiting_for_confirmation = State()


class AddPatternStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ —Å–∫–∞–º–∞."""
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    waiting_for_pattern = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
    waiting_for_import_text = State()


class DurationInputStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏.

    –§–æ—Ä–º–∞—Ç—ã: s (—Å–µ–∫—É–Ω–¥—ã), min (–º–∏–Ω—É—Ç—ã), h (—á–∞—Å—ã), d (–¥–Ω–∏), m (–º–µ—Å—è—Ü—ã)
    –ü—Ä–∏–º–µ—Ä—ã: 30s, 5min, 1h, 1d, 1m
    """
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–ª–æ–≤
    waiting_for_duration = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –∞–Ω—Ç–∏—Å–∫–∞–º–∞
    waiting_for_scam_duration = State()


class CategoryTextStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è –≤–≤–æ–¥–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä %user% –¥–ª—è —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    """
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –º—É—Ç–µ
    waiting_for_mute_text = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –±–∞–Ω–µ
    waiting_for_ban_text = State()


class CategoryDelayStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è FSM –¥–ª—è –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–µ–∫.

    –§–æ—Ä–º–∞—Ç—ã: s (—Å–µ–∫—É–Ω–¥—ã), min (–º–∏–Ω—É—Ç—ã), h (—á–∞—Å—ã)
    –ü—Ä–∏–º–µ—Ä—ã: 30s, 5min, 1h
    """
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è
    waiting_for_delete_delay = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±–æ—Ç–∞
    waiting_for_notification_delay = State()


# ============================================================
# FSM –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –ê–ù–¢–ò–§–õ–£–î–ê
# ============================================================

class FloodCustomInputStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∞–Ω—Ç–∏—Ñ–ª—É–¥–∞."""
    waiting_for_max_repeats = State()
    waiting_for_time_window = State()


class FloodTextStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤ –∞–Ω—Ç–∏—Ñ–ª—É–¥–∞."""
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–∏
    waiting_warn_text = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –º—É—Ç–µ
    waiting_mute_text = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –±–∞–Ω–µ
    waiting_ban_text = State()


class FloodDelayStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –∞–Ω—Ç–∏—Ñ–ª—É–¥–∞."""
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
    waiting_delete_delay = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    waiting_notification_delay = State()


class FloodAnySettingsStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ '–ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è'."""
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –ª–∏–º–∏—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    waiting_any_limit = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞
    waiting_any_window = State()


# ============================================================
# FSM –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –ö–ê–¢–ï–ì–û–†–ò–ô –°–õ–û–í
# ============================================================

class AddCategoryWordStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é."""
    waiting_for_word = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—Å–ª–µ preview –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
    waiting_for_confirmation = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
    waiting_for_custom_normalized = State()


class DeleteCategoryWordStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–ª–æ–≤ –ø–æ –≤–≤–æ–¥—É."""
    waiting_for_word = State()


# ============================================================
# FSM –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –ê–ù–¢–ò–°–ö–ê–ú–ê
# ============================================================

class ScamTextStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–Ω—Ç–∏—Å–∫–∞–º–∞."""
    waiting_for_mute_text = State()
    waiting_for_ban_text = State()


class ScamDelayStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –∞–Ω—Ç–∏—Å–∫–∞–º–∞."""
    waiting_for_delete_delay = State()
    waiting_for_notification_delay = State()


class AddThresholdStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –±–∞–ª–ª–æ–≤."""
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–∫–æ—Ä–∞
    waiting_min_score = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–∫–æ—Ä–∞
    waiting_max_score = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏—è
    waiting_action = State()
    # –û–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º—É—Ç–∞
    waiting_mute_duration = State()


class EditBaseSignalWeightStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–µ—Å–∞ –±–∞–∑–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞."""
    waiting_weight = State()


# ============================================================
# FSM –°–û–°–¢–û–Ø–ù–ò–Ø –î–õ–Ø –ö–ê–°–¢–û–ú–ù–´–• –°–ï–ö–¶–ò–ô
# ============================================================

class AddSectionStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞."""
    waiting_for_name = State()


class AddSectionPatternStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ —Ä–∞–∑–¥–µ–ª."""
    waiting_for_pattern = State()
    waiting_for_weight = State()


class SectionMuteDurationStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º—É—Ç–∞ —Ä–∞–∑–¥–µ–ª–∞."""
    waiting_for_duration = State()


class SectionForwardChannelStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –∫–∞–Ω–∞–ª–∞ –ø–µ—Ä–µ—Å—ã–ª–∫–∏."""
    waiting_for_channel = State()


class SectionMuteTextStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –º—É—Ç–µ."""
    waiting_for_text = State()


class SectionBanTextStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –±–∞–Ω–µ."""
    waiting_for_text = State()


class SectionNotificationDelayStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è."""
    waiting_for_delay = State()


class SectionImportPatternsStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤."""
    waiting_for_patterns = State()


class EditPatternWeightStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ—Å–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞."""
    waiting_for_weight = State()


class AddSectionThresholdStates(StatesGroup):
    """FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞ –±–∞–ª–ª–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏."""
    waiting_min_score = State()
    waiting_max_score = State()
    waiting_action = State()
    waiting_mute_duration = State()


# ============================================================
# –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –ü–ê–†–°–ò–ù–ì–ê
# ============================================================

def parse_duration(duration_str: str) -> int:
    """–ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∏–Ω—É—Ç—ã.

    –§–æ—Ä–º–∞—Ç—ã:
    - 30s = 30 —Å–µ–∫—É–Ω–¥ = 0 –º–∏–Ω—É—Ç (–º–∏–Ω–∏–º—É–º 1)
    - 5min = 5 –º–∏–Ω—É—Ç
    - 1h = 1 —á–∞—Å = 60 –º–∏–Ω—É—Ç
    - 1d = 1 –¥–µ–Ω—å = 1440 –º–∏–Ω—É—Ç
    - 1m = 1 –º–µ—Å—è—Ü = 43200 –º–∏–Ω—É—Ç (30 –¥–Ω–µ–π)

    Args:
        duration_str: –°—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ "30s", "5min", "1h", "1d", "1m" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ (–º–∏–Ω—É—Ç—ã)

    Returns:
        int: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö, –∏–ª–∏ None –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π
    """
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π –≤–≤–æ–¥
    if not duration_str or not duration_str.strip():
        return None

    # –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã
    s = duration_str.lower().strip()

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞
    if s.startswith('-'):
        return None

    # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
    match = re.match(r'^(\d+)\s*(s|sec|min|h|hour|d|day|m|month)$', s)
    if match:
        value = int(match.group(1))
        unit = match.group(2)

        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –º–∏–Ω—É—Ç—ã
        if unit in ('s', 'sec'):
            # –°–µ–∫—É–Ω–¥—ã -> –º–∏–Ω—É—Ç—ã (–º–∏–Ω–∏–º—É–º 1 –º–∏–Ω—É—Ç–∞)
            return max(1, value // 60)
        elif unit == 'min':
            return value
        elif unit in ('h', 'hour'):
            return value * 60
        elif unit in ('d', 'day'):
            return value * 1440
        elif unit in ('m', 'month'):
            return value * 43200

    # –ü—Ä–æ–±—É–µ–º –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ (–º–∏–Ω—É—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    if re.match(r'^\d+$', s):
        return int(s)

    # –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
    return None


def parse_delay_seconds(delay_str: str) -> int:
    """–ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–µ–∫—É–Ω–¥—ã.

    –§–æ—Ä–º–∞—Ç—ã:
    - 30s –∏–ª–∏ 30 = 30 —Å–µ–∫—É–Ω–¥
    - 5min = 5 –º–∏–Ω—É—Ç = 300 —Å–µ–∫—É–Ω–¥
    - 1h = 1 —á–∞—Å = 3600 —Å–µ–∫—É–Ω–¥
    - 1d = 1 –¥–µ–Ω—å = 86400 —Å–µ–∫—É–Ω–¥
    - 1m = 1 –º–µ—Å—è—Ü = 2592000 —Å–µ–∫—É–Ω–¥ (30 –¥–Ω–µ–π)
    - 1y = 1 –≥–æ–¥ = 31536000 —Å–µ–∫—É–Ω–¥ (365 –¥–Ω–µ–π)

    Args:
        delay_str: –°—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ "30s", "5min", "1h", "1d", "1m", "1y" –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ (—Å–µ–∫—É–Ω–¥—ã)

    Returns:
        int: –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –∏–ª–∏ None –µ—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π
    """
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π –≤–≤–æ–¥
    if not delay_str or not delay_str.strip():
        return None

    # –ü—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É –∏ —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã
    s = delay_str.lower().strip()

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞
    if s.startswith('-'):
        return None

    # –ü—Ä–æ–±—É–µ–º —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
    match = re.match(r'^(\d+)\s*(s|sec|min|h|hour|d|day|m|month|y|year)$', s)
    if match:
        value = int(match.group(1))
        unit = match.group(2)

        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ —Å–µ–∫—É–Ω–¥—ã
        if unit in ('s', 'sec'):
            return value
        elif unit == 'min':
            return value * 60
        elif unit in ('h', 'hour'):
            return value * 3600
        elif unit in ('d', 'day'):
            return value * 86400
        elif unit in ('m', 'month'):
            return value * 2592000  # 30 –¥–Ω–µ–π
        elif unit in ('y', 'year'):
            return value * 31536000  # 365 –¥–Ω–µ–π

    # –ü—Ä–æ–±—É–µ–º –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ (—Å–µ–∫—É–Ω–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    if re.match(r'^\d+$', s):
        return int(s)

    # –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
    return None
